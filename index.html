<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chatbot Sofie Marie</title>
    <style>
        /* Stiluri pentru interfața inițială */
        #chatbot {
            background-color: #f7f7f7;
            width: 300px;
            margin: 0 auto;
            padding: 20px;
            border-radius: 10px;
            font-family: Arial, sans-serif;
            display: block;
            text-align: center;
        }

        #chatbox {
            height: 300px;
            overflow-y: auto;
            margin-bottom: 20px;
        }

        .marie-message, .user-message {
            margin-bottom: 10px;
        }

        .marie-message {
            background-color: #f0c7b3;
            padding: 10px;
            border-radius: 10px;
            display: inline-block;
            text-align: left;
        }

        .user-message {
            background-color: #e1e1e1;
            padding: 10px;
            border-radius: 10px;
            display: inline-block;
            text-align: left;
        }

        #response-buttons {
            display: flex;
            justify-content: space-between;
        }

        .response-btn {
            background-color: #f7b5d5;
            border: none;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }

        .response-btn:hover {
            background-color: #e89fbd;
        }

        input[type="text"] {
            margin-top: 10px;
            padding: 10px;
            width: 80%;
            border-radius: 5px;
            border: 1px solid #ddd;
        }

        #sofia-image {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div id="chatbot">
        <img src="sofia_pisica.jpg" alt="Sofie Pisica Marie" id="sofia-image"> <!-- Imaginea pisicii -->
        <div id="chatbox"></div>
        <div id="response-buttons">
            <button class="response-btn" id="question1-btn" style="display: none;" onclick="giveAnswer(1)">La ce masă stai?</button>
            <button class="response-btn" id="question2-btn" style="display: none;" onclick="giveAnswer(2)">În ce cameră ești cazat?</button>
        </div>
    </div>

    <script>
        // Structura de date pentru invitați
        const listaInvitati = [
            { nume: "Lita Irina", camera: "Camera 99", masa: "Masa 2" },
            { nume: "Lita Gabriel", camera: "Camera 69", masa: "Masa 4" },
            { nume: "Tudoran Carmen", camera: "Nu vei fi cazat aici", masa: "Masa 5" }
        ];

        let userName = '';

        // Functie care se execută la încărcarea paginii
        window.onload = function() {
            setTimeout(function() {
                document.getElementById("chatbot").style.display = "block";

                var chatbox = document.getElementById("chatbox");
                var marieMessageDiv = document.createElement("div");
                marieMessageDiv.classList.add("marie-message");
                marieMessageDiv.innerHTML = '<span>Sofie Marie:</span> Buna! Eu sunt pisicuta Sofie Marie. Te astept cu drag la botezul meu. Daca imi spui cum te numesti te pot ajuta cu informatii legate de masa la care vei sta si camera unde vei fi cazat.';
                chatbox.appendChild(marieMessageDiv);

                // Adaugă input pentru nume
                var nameInput = document.createElement("input");
                nameInput.setAttribute("id", "name-input");
                nameInput.setAttribute("placeholder", "Cum te numesti?");
                nameInput.setAttribute("type", "text");
                chatbox.appendChild(nameInput);
                nameInput.focus();

                nameInput.addEventListener("keypress", function(event) {
                    if (event.key === "Enter" && nameInput.value.trim() !== "") {
                        userName = nameInput.value;
                        var userMessageDiv = document.createElement("div");
                        userMessageDiv.classList.add("user-message");
                        userMessageDiv.textContent = "Tu: " + userName;
                        chatbox.appendChild(userMessageDiv);

                        // Căutăm utilizatorul în lista de invitați
                        const invitat = listaInvitati.find(inv => inv.nume.trim().toLowerCase() === userName.trim().toLowerCase());

                        // Afișăm răspunsul pe baza rezultatului căutării
                        var botMessageDiv = document.createElement("div");
                        botMessageDiv.classList.add("marie-message");

                        if (invitat) {
                            botMessageDiv.innerHTML = `<span>Sofie Marie:</span> Încântată de cunoștință, ${userName}! Te pot ajuta cu răspunsurile la întrebările de mai jos. Te rog să selectezi întrebarea la care vrei să răspund. :)`;

                            // Afișează butoanele pentru întrebări
                            document.getElementById("question1-btn").style.display = "inline-block";
                            document.getElementById("question2-btn").style.display = "inline-block";
                            window.invitat = invitat; // Stocăm invitatul pentru a-l folosi ulterior
                        } else {
                            botMessageDiv.innerHTML = `<span>Sofie Marie:</span> Imi pare rau, dar numele introdus nu este pe lista de invitati. Mai incearca! Trebuia sa treci de forma "Nume Prenume"`;
                            // Resetează inputul pentru un nou nume
                            var newNameInput = document.createElement("input");
                            newNameInput.setAttribute("id", "name-input");
                            newNameInput.setAttribute("placeholder", "Cum te numesti?");
                            newNameInput.setAttribute("type", "text");
                            chatbox.appendChild(newNameInput);
                            newNameInput.focus();

                            newNameInput.addEventListener("keypress", function(event) {
                                if (event.key === "Enter" && newNameInput.value.trim() !== "") {
                                    userName = newNameInput.value;
                                    userMessageDiv.textContent = "Tu: " + userName;
                                    chatbox.appendChild(userMessageDiv);

                                    // Căutăm utilizatorul din nou în lista de invitați
                                    const invitat = listaInvitati.find(inv => inv.nume.trim().toLowerCase() === userName.trim().toLowerCase());

                                    // Afișăm din nou rezultatul căutării
                                    var botMessageDiv = document.createElement("div");
                                    botMessageDiv.classList.add("marie-message");

                                    if (invitat) {
                                        botMessageDiv.innerHTML = `<span>Sofie Marie:</span> Încântată de cunoștință, ${userName}! Te pot ajuta cu răspunsurile la întrebările de mai jos. Te rog să selectezi întrebarea la care vrei să răspund. :)`;

                                        // Afișează butoanele pentru întrebări
                                        document.getElementById("question1-btn").style.display = "inline-block";
                                        document.getElementById("question2-btn").style.display = "inline-block";
                                        window.invitat = invitat; // Stocăm invitatul pentru a-l folosi ulterior
                                    } else {
                                        botMessageDiv.innerHTML = `<span>Sofie Marie:</span> Imi pare rau, dar numele introdus nu este pe lista de invitati. Mai incearca! Trebuia sa treci de forma "Nume Prenume"`;
                                    }

                                    chatbox.appendChild(botMessageDiv);
                                    chatbox.scrollTop = chatbox.scrollHeight;

                                    // Ascunde vechiul input și afișează noul
                                    document.getElementById("name-input").style.display = "none";
                                }
                            });
                        }

                        chatbox.appendChild(botMessageDiv);
                        chatbox.scrollTop = chatbox.scrollHeight;

                        // Ascunde inputul de nume
                        nameInput.style.display = "none";
                    }
                });
            }, 1000);
        };

        // Funcție pentru a răspunde la întrebările selectate
        function giveAnswer(questionNumber) {
            var chatbox = document.getElementById("chatbox");

            let answerDiv = document.createElement("div");
            answerDiv.classList.add("marie-message");

            if (questionNumber === 1) {
                answerDiv.innerHTML = `<span>Sofie Marie:</span> Masa la care stai este ${window.invitat.masa}.`;
            } else if (questionNumber === 2) {
                answerDiv.innerHTML = `<span>Sofie Marie:</span> Camera în care ești cazat este ${window.invitat.camera}.`;
            }

            chatbox.appendChild(answerDiv);
            chatbox.scrollTop = chatbox.scrollHeight;
        }
    </script>
</body>
</html>
